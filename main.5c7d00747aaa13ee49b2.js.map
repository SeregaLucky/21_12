{"version":3,"sources":["webpack:///./js/newApi.js","webpack:///./js/lazyLoad.js","webpack:///./js/workDom.js","webpack:///./js/infinitScroll.js","webpack:///./js/templates/templateItem.hbs","webpack:///./js/templates/templateList.hbs"],"names":["objNews","page","findWord","makeFetchNews","mainUrl","this","fetch","then","res","json","catch","err","setWord","resetPage","findNeedImgs","needArrImg","allImg","document","querySelectorAll","Array","from","length","delNum","slice","forEach","img","IntersectionObserver","entries","observer","entry","isIntersecting","target","src","dataset","source","disconnect","observe","lazyLoad","refs","list","querySelector","form","buttonMore","divForAddMore","makeFetch","data","console","log","dataList","allLi","articles","templateList","insertAdjacentHTML","classList","add","addEventListener","e","preventDefault","input","currentTarget","elements","text1","value","innerHTML","reset","rootMargin","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.5c7d00747aaa13ee49b2.js","sourcesContent":["const baseURL = 'https://newsapi.org/v2';\r\nconst apiKey = '0d6bdd13a3e242d48d2af39b9df0cb49';\r\n\r\nexport const objNews = {\r\n  page: 1,\r\n  findWord: '',\r\n\r\n  makeFetchNews() {\r\n    const mainUrl = `/everything?q=${this.findWord}&page=${this.page}&apiKey=`;\r\n\r\n    return fetch(baseURL + mainUrl + apiKey)\r\n      .then(res => {\r\n        // console.log(res);\r\n        // if (res.articles.length === 0) return;\r\n        // if (res.status >= 400) {};\r\n\r\n        this.page += 1;\r\n        return res.json();\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      }); // не обезательный если дальше по цепочке есть catch\r\n  },\r\n\r\n  setWord(findWord) {\r\n    this.findWord = findWord;\r\n  },\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n};\r\n\r\n// export const makeFetchNews = findWord => {\r\n//   const baseURL = 'https://newsapi.org/v2';\r\n//   const mainUrl = `/everything?q=${findWord}&pageSize=22&page=2&apiKey=`;\r\n//   // const mainUrl = `/everything?q=${findWord}&pageSize=22&apiKey=`;\r\n//   const apiKey = '0d6bdd13a3e242d48d2af39b9df0cb49';\r\n\r\n//   return fetch(baseURL + mainUrl + apiKey)\r\n//     .then(res => res.json())\r\n//     .catch(err => {\r\n//       throw err;\r\n//     }); // не обезательный если дальше по цепочке есть catch\r\n// };\r\n","export const findNeedImgs = () => {\r\n  let allImg = document.querySelectorAll('img');\r\n  allImg = Array.from(allImg);\r\n\r\n  let needArrImg;\r\n\r\n  if (allImg.length <= 20) {\r\n    needArrImg = allImg;\r\n  } else if (!(allImg.length % 2)) {\r\n    const delNum = allImg.length - 20;\r\n    needArrImg = allImg.slice(delNum);\r\n  } else {\r\n    // const delNum = allImg.length - 20;\r\n    // const needNumb = allImg.length - delNum;\r\n    // console.log('needNumb', needNumb);\r\n    // needArrImg = allImg.slice(needNumb);\r\n  }\r\n\r\n  needArrImg.forEach(img => lazyLoad(img));\r\n};\r\n\r\nfunction lazyLoad(img) {\r\n  const fnEntry = (entries, observer) => {\r\n    // console.log(entries);\r\n\r\n    entries.forEach(entry => {\r\n      // console.log(entry);\r\n\r\n      if (entry.isIntersecting) {\r\n        // console.log(entry);\r\n        // console.log(entry.target);\r\n        // console.log(entry.target.dataset.source);\r\n\r\n        const img = entry.target;\r\n        const src = img.dataset.source;\r\n\r\n        img.src = src;\r\n        // console.log(observer);\r\n        observer.disconnect();\r\n      }\r\n    });\r\n  };\r\n\r\n  const intOb = new IntersectionObserver(fnEntry, {});\r\n\r\n  intOb.observe(img);\r\n}\r\n","import { objNews } from './newApi';\r\nimport { templateItemNew } from './templates/templateItem';\r\n\r\nimport templateItemHbs from './templates/templateItem.hbs';\r\nimport templateList from './templates/templateList.hbs';\r\n\r\nimport { findNeedImgs } from './lazyLoad';\r\n\r\nexport const refs = {\r\n  list: document.querySelector('.js_list'),\r\n  form: document.querySelector('.js_form'),\r\n  buttonMore: document.querySelector('.js_button_more'),\r\n  divForAddMore: document.querySelector('.js_div_for_add_mode'),\r\n};\r\n\r\nrefs.form.addEventListener('submit', handleSubmitNews);\r\nrefs.buttonMore.addEventListener('click', handleClickMoreNews);\r\n\r\nfunction handleSubmitNews(e) {\r\n  e.preventDefault();\r\n  // console.log(e.currentTarget.elements.text1);\r\n  const input = e.currentTarget.elements.text1;\r\n\r\n  if (input.value.length === 0) return;\r\n\r\n  refs.list.innerHTML = '';\r\n\r\n  objNews.setWord(input.value);\r\n  objNews.resetPage();\r\n\r\n  makeFetch();\r\n\r\n  e.currentTarget.reset();\r\n  // input.value = '';\r\n}\r\n\r\nfunction handleClickMoreNews() {\r\n  // Кнопка не активна но она есть\r\n  // if (objNews.findWord.length === 0) return;\r\n  // makeFetch();\r\n  //\r\n  //\r\n\r\n  makeFetch();\r\n}\r\n\r\nexport function makeFetch() {\r\n  objNews\r\n    .makeFetchNews()\r\n    .then(data => {\r\n      console.log(data);\r\n      const allLi = markup(data.articles);\r\n      refs.list.insertAdjacentHTML('beforeend', allLi);\r\n\r\n      findNeedImgs();\r\n\r\n      // Кнопка появляется лишь тогда когда пришел первый запрос\r\n      if (objNews.page > 1) {\r\n        refs.buttonMore.classList.add('button_more--active');\r\n      }\r\n    })\r\n    .catch(err => console.log(err));\r\n}\r\n\r\n// function markup(dataList) {\r\n//   return dataList.map(item => `<li>${item.author}</li>`).join('');\r\n// }\r\nfunction markup(dataList) {\r\n  // return dataList.map(item => templateItemNew(item)).join('');\r\n  // return dataList.map(item => templateItemHbs(item)).join('');\r\n  return templateList(dataList);\r\n}\r\n\r\n// const fnEntries = entries => {\r\n//   console.log(entries);\r\n\r\n//   entries.forEach(entry => {\r\n//     if (entry.isIntersecting) {\r\n//       makeFetch();\r\n//     }\r\n//   });\r\n// };\r\n\r\n// const options = {\r\n//   rootMargin: '200px',\r\n// };\r\n\r\n// const intObs = new IntersectionObserver(fnEntries, options);\r\n// intObs.observe(refs.divForAddMore);\r\n","import { refs, makeFetch } from './workDom';\r\nimport { objNews } from './newApi';\r\n\r\nconst fnEntries = entries => {\r\n  console.log(entries);\r\n\r\n  entries.forEach(entry => {\r\n    if (entry.isIntersecting) {\r\n      if (objNews.page === 1) return;\r\n\r\n      makeFetch();\r\n    }\r\n  });\r\n};\r\n\r\nconst options = {\r\n  rootMargin: '200px',\r\n};\r\n\r\nconst intObs = new IntersectionObserver(fnEntries, options);\r\nintObs.observe(refs.divForAddMore);\r\n","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\\r\\n  <h2>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":6},\"end\":{\"line\":2,\"column\":15}}}) : helper)))\n    + \"</h2>\\r\\n  <img width=\\\"300\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"urlToImage\") || (depth0 != null ? lookupProperty(depth0,\"urlToImage\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"urlToImage\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":24},\"end\":{\"line\":3,\"column\":38}}}) : helper)))\n    + \"\\\" alt=\\\"\\\">\\r\\n  <p>Author: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"author\") || (depth0 != null ? lookupProperty(depth0,\"author\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"author\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":13},\"end\":{\"line\":4,\"column\":23}}}) : helper)))\n    + \"</p>\\r\\n</li>\";\n},\"useData\":true});","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\\r\\n  <h2>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":6},\"end\":{\"line\":3,\"column\":15}}}) : helper)))\n    + \"</h2>\\r\\n  <img width=\\\"300\\\" src=\\\"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"urlToImage\") || (depth0 != null ? lookupProperty(depth0,\"urlToImage\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"urlToImage\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":39},\"end\":{\"line\":4,\"column\":53}}}) : helper)))\n    + \"\\\" alt=\\\"\\\">\\r\\n  <p>Author: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"author\") || (depth0 != null ? lookupProperty(depth0,\"author\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"author\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":13},\"end\":{\"line\":5,\"column\":23}}}) : helper)))\n    + \"</p>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":7,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}